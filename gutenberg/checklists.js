(()=>{"use strict";const e=window.wp.element;!function(t){const i=t.plugins.registerPlugin,{subscribe:s,withSelect:c,withDispatch:l}=t.data,n=t.compose.compose,a=t.element.createElement,r=t.components.SelectControl,{PluginSidebar:o,PluginSidebarMoreMenuItem:d,PluginPostStatusInfo:u}=t.editPost,{__}=t.i18n,{Panel:h,PanelBody:m,CheckboxControl:k}=t.components;var g,E,v="";!1!==STRIVE.checklists?(function(){v=STRIVE.checklists_post_saved;var e=!0;for(const t of STRIVE.checklists)if(t.id==STRIVE.checklists_post_saved){e=!1;break}e&&(v=""),""==v&&STRIVE.checklists_completed_tasks.length>0&&(v=STRIVE.checklists[0].id),""==v&&(v=STRIVE.checklists_default_global),""==v&&(v=STRIVE.checklists[0].id)}(),function(){var e=[];for(const t in STRIVE.checklists)e.push({label:STRIVE.checklists[t].title,value:STRIVE.checklists[t].id});g=n(l((function(e,t){return{setMetaFieldValue:function(i){e("core/editor").editPost({meta:{[t.fieldName]:i}})}}})),c((function(e,t){return{metaFieldValue:e("core/editor").getEditedPostAttribute("meta")[t.fieldName]?e("core/editor").getEditedPostAttribute("meta")[t.fieldName]:v}})))((function(t){return a(r,{label:"Active Checklist",value:t.metaFieldValue||v,options:e,onChange:function(e){t.setMetaFieldValue(e),updateChecklistVisibility(e),v=e}})}))}(),function(){E={"not-started":[],writing:[],editing:[],complete:[]};for(const a of STRIVE.checklists){const r=a.checklist;for(const o in r){var i=[];for(const d in r[o]){let u=r[o][d].split("~"),h=u[0],m=u[1];var s=!1;function g(e,t){var i=e("core/editor").getEditedPostAttribute("meta")._strive_checklists;return JSON.parse(i).includes(m)&&(t=!0),t}let p=t=>(0,e.createElement)(k,{label:h,checked:t.state,onChange:e=>t.onCheckboxChange(e)});p=c((e=>({state:g(e)})))(p),p=l((e=>({onCheckboxChange:i=>{s=!s;var c=t.data.select("core/editor").getEditedPostAttribute("meta")._strive_checklists,l=JSON.parse(c);if(""==l&&(l=[]),i)l.push(m);else{let e=l.indexOf(m);l.splice(e,1)}let n=JSON.stringify(l);e("core/editor").editPost({meta:{_strive_checklists:n}})}})))(p),i.push((0,e.createElement)(p,null))}var n="checkbox-container";v==a.id&&(n+=" show"),E[o].push((0,e.createElement)("div",{"data-id":a.id,class:n,"data-status":o},i))}}}(),function(){var s=e=>e==t.data.select("core/editor").getEditedPostAttribute("meta")._strive_editorial_status;function c(){setTimeout((()=>{var e;e=v,document.querySelectorAll(".checkbox-container").forEach((function(t){t.classList.remove("show"),t.dataset.id==e&&t.classList.add("show")}))}),10)}i("strive-checklists",{icon:"editor-ul",render:()=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(d,{target:"strive-checklists"},__("Post Checklist","strive")),(0,e.createElement)(o,{name:"strive-checklists",title:__("Post Checklist","strive")},(0,e.createElement)("div",{id:"checklist-select",class:"checklist-select"},(0,e.createElement)(g,{fieldName:"_strive_active_checklist"})),(0,e.createElement)(h,null,(0,e.createElement)(m,{title:"Not Started",initialOpen:s("not-started"),onToggle:c,className:"not-started"},E["not-started"]),(0,e.createElement)(m,{title:"Writing",initialOpen:s("writing"),onToggle:c,className:"writing"},E.writing),(0,e.createElement)(m,{title:"Editing",initialOpen:s("editing"),onToggle:c,className:"editing"},E.editing),(0,e.createElement)(m,{title:"Complete",initialOpen:s("complete"),onToggle:c,className:"complete"},E.complete))))})}()):i("strive-checklists",{icon:"editor-ul",render:()=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(d,{target:"strive-checklists"},__("Post Checklist","strive")),(0,e.createElement)(o,{name:"strive-checklists",title:__("Post Checklist","strive")},(0,e.createElement)("div",{class:"no-checklists"},(0,e.createElement)("p",null,"You haven't created any checklists with Strive yet. Checklists can help you document and systemize your writing process."),(0,e.createElement)("p",null,(0,e.createElement)("a",{href:STRIVE.checklist_create_url,target:"_blank",class:"button-primary"},"Create a Checklist")))))})}(window.wp)})();