!function(){function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}function e(e,a){var s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!s){if(Array.isArray(e)||(s=function(e,a){if(e){if("string"==typeof e)return t(e,a);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?t(e,a):void 0}}(e))||a&&e&&"number"==typeof e.length){s&&(e=s);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){s=s.call(e)},n:function(){var t=s.next();return r=t.done,t},e:function(t){l=!0,o=t},f:function(){try{r||null==s.return||s.return()}finally{if(l)throw o}}}}var a=jQuery,s={context:"calendar",canFilter:!0,setup:function(){var t,e=this;a("#toggle-filters").on("click",(function(t){e.toggleFilters(t,a(this))})),a("#filter-category, #filter-tag, #filter-post-type").select2({width:"style",theme:"classic"}),a("#filter-category, #filter-tag, #filter-post-type, #logic-any, #logic-all, #context-calendar, #context-sidebar, #context-both, #visibility-fade, #visibility-remove").on("change",(function(){e.applyFilters()})),a("#filter-search").on("input",(function(){clearTimeout(t),t=setTimeout((function(){e.applyFilters()}),250)})),a("#reset-filter").on("click",(function(t){t.preventDefault(),e.resetFilter()})),a("#filter-form").on("submit",(function(t){t.preventDefault()})),a("#show-save-filter").on("click",(function(t){t.preventDefault(),e.showSaveForm()})),a("#cancel-save-filter").on("click",(function(t){t.preventDefault(),e.hideSaveForm()})),a("#save-filter").on("click",(function(t){t.preventDefault(),e.saveFilter()})),a("#delete-filter").on("click",(function(t){e.deleteFilter()})),a("#select-filter").on("change",(function(){if("placeholder"==a(this).val())e.resetFilter(),a("#filter-id").val(""),a("#filter-name").val(""),a("#show-save-filter").text("Save new filter"),a("#delete-filter").removeClass("show");else{var t=a(this).find("option:selected").data("fields"),s=a(this).find("option:selected").data("id"),n=a(this).find("option:selected").text();e.setFields(t,s,n),a("#show-save-filter").text("Update this filter"),a("#delete-filter").addClass("show")}}))},toggleFilters:function(t,e){t.preventDefault(),e.toggleClass("open"),a("#filters").toggleClass("open")},applyFilters:function(){if(this.canFilter){var t,s=a("#filter-category").val(),n=a("#filter-tag").val(),i=a("#filter-post-type").val(),o=a("#filter-search").val().toLowerCase(),r=a("#filters .visibility input:checked").val(),l=a("#filters  .context input:checked").val();if(this.context!=l&&("calendar"==l?(a("#unscheduled-drafts").attr("data-filter-style",""),a("#unscheduled-drafts .post").removeClass("visible")):"sidebar"==l&&(a("#calendar").attr("data-filter-style",""),a("#calendar .post").removeClass("visible")),this.context=l),Array.isArray(s)&&s.length||Array.isArray(n)&&n.length||Array.isArray(i)&&i.length||""!=o)a("#toggle-filters").addClass("active"),"calendar"==this.context?(t=a("#calendar .post"),a("#calendar").attr("data-filter-style",r),a("#unscheduled-drafts").attr("data-filter-style","")):"sidebar"==this.context?(t=a("#unscheduled-drafts .post"),a("#calendar").attr("data-filter-style",""),a("#unscheduled-drafts").attr("data-filter-style",r)):(t=a("#calendar .post, #unscheduled-drafts .post"),a("#calendar, #unscheduled-drafts").attr("data-filter-style",r)),t.each((function(){var t=a(this).attr("data-category").split(","),r=a(this).attr("data-tag").split(","),l=a(this).attr("data-post-type"),d=a(this),c=!1,p=!1;a("#logic-all").prop("checked")&&(p=!0);var u,f=e(s);try{for(f.s();!(u=f.n()).done;){var h=u.value;if(t.includes(h)){if(d.addClass("visible"),c=!0,!p)break}else if(p){c=!1;break}}}catch(t){f.e(t)}finally{f.f()}if(p&&s.length>0&&!c)return d.removeClass("visible"),!0;if(c&&!p)return!0;var v,m=e(n);try{for(m.s();!(v=m.n()).done;){var y=v.value;if(r.includes(y)){if(d.addClass("visible"),c=!0,!p)break}else if(p){c=!1;break}}}catch(t){m.e(t)}finally{m.f()}if(p&&n.length>0&&!c)return d.removeClass("visible"),!0;if(c&&!p)return!0;var g,_=e(i);try{for(_.s();!(g=_.n()).done;){if(l==g.value){if(d.addClass("visible"),c=!0,!p)break}else if(p){c=!1;break}}}catch(t){_.e(t)}finally{_.f()}return p&&i.length>0&&!c?(d.removeClass("visible"),!0):!(!c||p)||(""!=o&&(-1!==a(this).find(".post-title").text().toLowerCase().search(o)?(a(this).addClass("visible"),c=!0):p&&(c=!1)),!!c||void d.removeClass("visible"))}));else a("#calendar, #unscheduled-drafts").attr("data-filter-style",""),a("#calendar .post, #unscheduled-drafts .post").removeClass("visible"),a("#toggle-filters").removeClass("active")}},resetFilter:function(){var t=a("#select-filter").find("option:selected");"placeholder"==t.val()?(this.canFilter=!1,a("#filter-category, #filter-tag, #filter-post-type").val(null).trigger("change"),a("#filter-search").val(""),a("#logic-any").prop("checked",!0),a("#context-calendar").prop("checked",!0),a("#visibility-fade").prop("checked",!0),this.canFilter=!0,this.applyFilters()):this.setFields(t.data("fields"),t.data("id"),t.text())},showSaveForm:function(){a("#filters").addClass("save"),a("#filter-name").focus()},hideSaveForm:function(){a("#filters").removeClass("save"),a("#filter-name").val("")},saveFilter:function(){var t=a("#filter-form").serializeArray();t.push({name:"name",value:a("#filter-name").val()});var e={action:"save_filter",filter:a.param(t),save_filter_nonce:STRIVE_AJAX.save_filter_nonce};a("#filters").addClass("saving"),jQuery.post(ajaxurl,e,(function(t){if(a("#filters").removeClass("save saving"),(t=JSON.parse(t)).new)a("#select-filter").append(t.data),a("#select-filter").find("option:last-child").prop("selected",!0);else{var e=a("#select-filter").find("option:selected");e.text(t.name),e.data("fields",t.data),e.attr("data-fields",JSON.stringify(t.data))}a("#delete-filter").addClass("show")}))},setFields:function(t,e,s){this.canFilter=!1,a("#filter-id").val(e),a("#filter-name").val(s),a("#filter-category").val(t.category).trigger("change"),a("#filter-tag").val(t.tag).trigger("change"),a("#filter-post-type").val(t.post_type).trigger("change"),a("#filter-search").val(t.search),a("#logic-"+t.logic).prop("checked",!0),a("#context-"+t.context).prop("checked",!0),a("#visibility-"+t.visibility).prop("checked",!0),this.canFilter=!0,this.applyFilters()},deleteFilter:function(){if(confirm("Are you sure you want to delete this filter?")){a("#filters").addClass("deleting");var t=a("#select-filter").find("option:selected"),e={action:"delete_filter",id:t.data("id"),delete_filter_nonce:STRIVE_AJAX.delete_filter_nonce};jQuery.post(ajaxurl,e,(function(e){a("#filters").removeClass("deleting"),a("#select-filter").find("option:first-child").prop("selected",!0),a("#select-filter").trigger("change"),t.remove()}))}}},n=jQuery,i={calendarNav:"",calendarDays:"",firstDays:[],DnD:"",setup:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.calendarNav=n("#calendar-navigation"),this.calendarDays=this.calendarNav.find(".days"),this.getFirstDays(),this.scrollToDay(n(".day.selected")),this.calendarNav.find('.day[data-month="'+this.calendarNav.data("month")+'"]').addClass("current"),this.watchEvents(t)},getFirstDays:function(){var t=this,e=this.calendarNav.find(".day").outerHeight();this.calendarNav.find(".first").each((function(){t.firstDays.push({month:n(this).data("month"),year:n(this).data("year"),top:n(this).position().top-parseInt(e),bottom:n(this).position().top+e})}))},watchEvents:function(t){var e=this;this.calendarDays.on("scroll",(function(){e.updateCalendarOnScroll(n(this),e.firstDays)})),this.calendarNav.find(".day-select").on("click",(function(t){e.userSelectedDate(t,n(this).parent())})),t&&(n("#date-select-link").on("click",(function(t){t.preventDefault(),e.calendarNav.toggleClass("show"),n("#date-select-arrow").toggleClass("flip")})),n("#reset-button").on("click",(function(){e.resetCalendar(n(this))})))},userSelectedDate:function(t,e){t.preventDefault(),this.reloadCalendar(e.data("date"),e);var a={month:e.data("month"),year:e.data("year")};this.updateCalendarNavigationData(a),this.calendarNav.data("date",e.data("date")).attr("data-date",e.data("date")),this.scrollToDay(e)},resetCalendar:function(t){this.reloadCalendar(t.data("date"),n("#calendar-navigation day.today"));var e={month:t.data("month"),year:t.data("year")};this.updateCalendarNavigationData(e),this.calendarNav.data("date",t.data("date")).attr("data-date",t.data("date")),this.scrollToDay(this.calendarNav.find(".day.today"))},scrollToDay:function(t){var e=parseInt(t.position().top)-1.5*this.calendarNav.find(".day").outerHeight();this.calendarDays.scrollTop(this.calendarDays.scrollTop()+e)},updateCalendarOnScroll:function(t,e){var a=this,s=t.scrollTop();e.forEach((function(t){t.top<s&&s<t.bottom&&t.month!=a.calendarNav.data("month")&&a.updateCalendarNavigationData(t)}))},updateCalendarNavigationData:function(t){this.calendarNav.data("month",t.month).attr("data-month",t.month),this.calendarNav.data("year",t.year).attr("data-year",t.year),this.calendarNav.find(".month").text(t.month),this.calendarNav.find(".year").text(t.year),this.calendarNav.find(".day").removeClass("current"),this.calendarNav.find('.day[data-month="'+t.month+'"]').addClass("current")},reloadCalendar:function(t,e){var a=this,i={action:"reload_calendar",calendar_date:t,reload_calendar_nonce:STRIVE_AJAX.reload_calendar_nonce};this.calendarNav.removeClass("show"),this.calendarNav.find(".day.user-selected").removeClass("user-selected"),e.addClass("user-selected"),n("#date-select-arrow").removeClass("flip"),n("#loading").css("display","flex"),jQuery.post(ajaxurl,i,(function(e){n("#loading").css("display","none"),e=JSON.parse(e),n("#calendar").html(e.calendar),n("#the-date").text(e.day),n("#calendar").find('.day[data-date="'+t+'"').addClass("user-selected"),moment(t).format("YYYY-MM-DD")!=moment().format("YYYY-MM-DD")?n("#reset-button").addClass("show"):n("#reset-button").removeClass("show"),a.resetDragulaContainers(),s.applyFilters()}))},resetDragulaContainers:function(){var t=document.querySelectorAll(".drop-target .post-container");t=Array.prototype.slice.call(t),this.DnD.containers=t}},o=jQuery,r={id:"",date:"",status:"",postType:"",form:"",submit:"",action:"",sortPosts:"",updatePostCount:"",missedDeadline:!1,open:function(t){var e=this;this.id=t.id,this.date=t.date,this.status=t.status,this.postType=t.post_type,this.action=t.form_action,o("#loading").css("display","flex");var a={action:"open_post_details_modal",open_post_details_modal_nonce:STRIVE_AJAX.open_post_details_modal_nonce,post_data:t};jQuery.get(ajaxurl,a,(function(t){o("#loading").css("display","none"),o("#strive-calendar").append(t),o("#post-details-container").addClass("visible"),window.innerHeight<900&&o("#post-data").scrollTop(1).scrollTop(0),e.form=o("#post-data"),e.submit=e.form.find("#submit"),"add-draft"!=e.action&&"add-future"!=e.action||e.form.addClass("new-post"),"update-draft"!=e.action&&"add-draft"!=e.action||e.form.addClass("sidebar-draft"),o("#cancel-update, #close-post-details").on("click",(function(){e.close()})),e.form.find(o("#post-title, #post-permalink").on("input",(function(){e.setQuickEditButtonState(e.submit)}))),e.form.find("#post-status").on("change",(function(){o(this).parent().attr("data-status",o(this).val())})),0===e.id&&(o("#post-title").val(""),e.submit.prop("disabled",!0),o("#post-title").focus()),e.form.submit((function(t){e.submitPostUpdate(t)})),e.watchEvents(),e.setupDateCal(),e.updateSubmitButtonText(),e.hidePostDate(),e.select2Customization()}))},watchEvents:function(){var t=this;o("#unschedule-post").on("click",(function(e){t.unschedulePost(e)})),o("#delete-post").on("click",(function(){t.deletePost()}))},unschedulePost:function(t){t.preventDefault(),this.action="unschedule",this.form.submit()},updateSubmitButtonText:function(){var t=this,e=!1;o("#missed-deadline-explanation").length>0&&(e=!0);var a=moment(o("#post-date").val()),s=this.form.data("post-type-label");this.form.find("#post-date").on("change",(function(){var n=moment(o("#post-date").val()),i=moment();o("#publish-warning-publish").css("display","none"),o("#publish-warning-schedule").css("display","none"),"draft"==t.status?n>i?t.submit.val("Schedule "+s):n<=i?(t.submit.val("Publish "+s),o("#publish-warning-publish").css("display","block")):t.submit.val("Update "+s):"future"==t.status?n>i&&n!=a?t.submit.val("Re-schedule "+s):n<=i?(t.submit.val("Publish "+s),e||o("#publish-warning-publish").css("display","block")):t.submit.val("Update "+s):"publish"==t.status?n<=i?t.submit.val("Update "+s):n>i&&(t.submit.val("Unpublish & Schedule "+s),o("#publish-warning-schedule").css("display","block")):"add-future"==t.action&&(n<=i?t.submit.val("Publish "+s):t.submit.val("Schedule "+s))}))},hidePostDate:function(){var t=this;"update-draft"==t.action||"add-draft"==t.action?t.form.find(".date").hide():t.form.find(".date").show()},select2Customization:function(){var t=this;o("#post-categories").select2({width:"style",theme:"classic",selectionCssClass:"category-selection",dropdownCssClass:"category-dropdown",templateSelection:function(t,e){return t.element&&o(e).css("background-color",o(t.element).attr("data-color")),t.text}}),o("#post-tags").select2({width:"style",theme:"classic",selectionCssClass:"tag-selection",dropdownCssClass:"tag-dropdown"}),o("#post-categories, #post-tags").on("select2:unselecting",(function(t){1!==o("#post-categories").val().length&&o(this).data("unselecting",!0)})).on("select2:opening",(function(t){o(this).data("unselecting")&&(o(this).removeData("unselecting"),t.preventDefault())})),o("#post-categories").on("select2:unselect",(function(e){t.setQuickEditButtonState(t.submit),""==o("#post-categories").val()&&o(this).next().addClass("no-category")})).on("select2:select",(function(e){t.setQuickEditButtonState(t.submit),o(this).next().removeClass("no-category")}))},setupDateCal:function(){var t=this.toMoment(o("#post-date-format").val()),e=!1;(o("#post-date-format").val().includes("H")||o("#post-date-format").val().includes("G"))&&(e=!0);var a="down";window.innerHeight<800&&(a="up"),o("#post-date").daterangepicker({singleDatePicker:!0,timePicker:!0,startDate:o("#post-date").val(),opens:"center",drops:a,applyButtonClasses:"button-primary",cancelClass:"button-secondary",timePicker24Hour:e,locale:{format:t}}),o("#post-date").on("apply.daterangepicker",(function(e,a){o(this).attr("value",a.startDate.format(t))}))},deletePost:function(){var t=this;if(confirm("Are you sure you want to move this "+this.form.data("post-type-label")+" to Trash?")){o("#loading").css("display","flex");var e={action:"delete_post",post_id:t.id,delete_post_nonce:STRIVE_AJAX.delete_post_nonce};jQuery.post(ajaxurl,e,(function(e){o("#post-"+t.id).remove(),o("#post-details-container").remove(),o("#loading").css("display","none"),t.updatePostCount()}))}},setQuickEditButtonState:function(t){var e=!1;""==this.form.find("#post-title").val()?(t.prop("disabled",!0),this.form.find("#post-title").addClass("empty"),e=!0):this.form.find("#post-title").removeClass("empty"),""==this.form.find("#post-permalink").val()?(t.prop("disabled",!0),this.form.find("#post-permalink").addClass("empty"),e=!0):this.form.find("#post-permalink").removeClass("empty"),"post"==this.postType&&0==o("#post-categories").val().length&&(t.prop("disabled",!0),e=!0),e||t.prop("disabled",!1)},close:function(){o("#post-details-container").remove(),this.id="",this.date="",this.status="",this.form="",this.submit="",this.action="",this.missedDeadline=!1},submitPostUpdate:function(t){t.preventDefault();var e=this;o("#loading").css("display","flex");var a=this.toMoment(o("#post-date-format").val()),n=moment(o("#post-date").val(),a);o("#post-date-save").val(n.format("YYYY-MM-DD HH:mm:ss"));var i={action:"update_post_data",form_data:e.form.serialize(),form_action:e.action,update_post_nonce:STRIVE_AJAX.update_post_nonce};jQuery.post(ajaxurl,i,(function(t){if(t=JSON.parse(t),o("#loading").css("display","none"),"add-draft"==e.action||"update-draft"==e.action||"unschedule"==e.action){var a=0;"update-draft"==e.action&&(a=o("#post-"+t.id).index(),o("#post-"+t.id).remove()),"unschedule"==e.action&&o("#calendar #post-"+t.id).remove(),0==a?o("#unscheduled-drafts .post-container").prepend(t.markup):o("#unscheduled-drafts .post:nth-child("+a+")").after(t.markup)}else{"update-future"!=e.action&&"update-publish"!=e.action||o("#post-"+t.id).remove();var i=o("#strive-calendar").find('[data-date="'+n.format("YYYY-MM-DD")+'"]');i.find(".post-container").append(t.markup);var r=i.find(".post");e.sortPosts(i,r),s.applyFilters()}e.close(),e.updatePostCount()}))},toMoment:function(t){var e={"\\h":"[h]","\\d":"[d]","\\e":"[e]",d:"DD",D:"ddd",j:"D",l:"dddd",N:"E",S:"o",w:"e",z:"DDD",W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",t:"",L:"",o:"YYYY",Y:"YYYY",y:"YY",a:"a",A:"A",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",e:"zz",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"X"};return t.replace(/((?:\\\w)|[A-Za-z])/g,(function(t){return e[t]||t}))}},$=jQuery,l={sortPosts:"",live:!1,paused:!1,timer:null,setup:function(){var t=this;$("#live-updates").hasClass("live")&&(t.live=!0),setTimeout(this.updatePosts(),5e3),$("#strive_live_calendar").on("change",(function(){t.toggleLiveUpdates($(this))})),document.addEventListener("visibilitychange",(function(){document.hidden?t.paused=!0:t.paused=!1}))},updatePosts:function(){var t=this;if(0!=t.live)if(1!=t.paused){var e={action:"live_update_calendar",live_update_calendar_nonce:STRIVE_AJAX.live_update_calendar_nonce};jQuery.get(ajaxurl,e,(function(e){if(t.timer=setTimeout((function(){t.updatePosts()}),5e3),""!=e){e=JSON.parse(e);for(var a=0;a<e.length;a++){if($("#post-id").val()==e[a].ID&&$("#edit-conflict").addClass("show"),$("#post-"+e[a].ID).remove(),"draft"==e[a].status)$("#unscheduled-drafts .post-container").append(e[a].html);else{var n=$('#calendar .day[data-date="'+e[a].date+'"]');n.find(".post-container").append(e[a].html);var i=n.find(".post");t.sortPosts(n,i)}s.applyFilters()}}}))}else t.timer=setTimeout((function(){t.updatePosts()}),1e3)},toggleLiveUpdates:function(t){t.attr("disabled",!0);var e=this;this.live=!this.live,this.live?$("#live-updates").addClass("live"):($("#live-updates").removeClass("live"),clearTimeout(e.timer));var a={action:"live_updates",live:this.live,live_updates_nonce:STRIVE_AJAX.live_updates_nonce};jQuery.post(ajaxurl,a,(function(){e.live&&e.updatePosts(),t.attr("disabled",!1)}))}};jQuery((function($){var t;moment.locale(STRIVE_AJAX.locale),s.setup(),i.setup(),l.setup(),$("body").on("click",".quick-edit-link",(function(t){t.preventDefault();var e={id:$(this).parent().data("id"),date:$(this).parent().data("date"),status:$(this).parent().data("status"),post_type:$(this).parent().data("post-type"),form_action:"update-"+$(this).parent().data("status")};r.open(e)})),$("#add-new-post").on("click",(function(){var t={id:0,date:$(this).parent().parent().attr("data-date"),status:null,post_type:$("#insert-post-options").data("post-type"),form_action:"add-future"};r.open(t),$("#insert-post-options").removeClass("visible")})),$("#add-new-draft").on("click",(function(){var t={id:0,date:moment().format("YYYY-MM-DD"),status:null,post_type:$("#insert-post-options").data("post-type"),form_action:"add-draft"};r.open(t)})),$("body").on("click",".insert-new-post",(function(){$("#insert-post-options").addClass("visible").attr("data-date",$(this).parent().data("date"))})),$("body").on("change","#post-type-select",(function(){$("#insert-post-options").data("post-type",$(this).val()),$("#insert-post-options").attr("data-post-type",$(this).val()),$("#add-new-post").text("Add New "+$(this).find("option:selected").text())})),$("#close-insert-post").on("click",(function(){$("#insert-post-options").removeClass("visible")})),$("#insert-draft").on("click",(function(){var t={action:"post_draft_select",date:$("#insert-post-options").attr("data-date"),post_type:$("#insert-post-options").data("post-type"),post_draft_select_nonce:STRIVE_AJAX.post_draft_select_nonce};jQuery.post(ajaxurl,t,(function(t){$("#strive-calendar").append(t),$("#insert-post-options").removeClass("visible"),$("#post-draft-select").select2(),$("#close-insert-draft").on("click",(function(){$("#insert-draft-modal").remove()})),$("#insert-draft-action").on("click",(function(){var t={id:$("#post-draft-select").val(),post_date:$("#insert-draft-modal").attr("data-date")},e={action:"insert_post_draft",post_data:t,insert_post_draft_nonce:STRIVE_AJAX.insert_post_draft_nonce};jQuery.post(ajaxurl,e,(function(a){$("#insert-draft-modal").remove();var i=$("#strive-calendar").find('[data-date="'+t.post_date+'"]');i.find(".post-container").append(a);var r=i.find(".post");n(i,r),$("#unscheduled-drafts").find("#post-"+e.post_data.id).remove(),o(),s.applyFilters()}))}))}))})),$("#settings-button, #close-settings").on("click",(function(t){t.preventDefault(),$("#strive-settings-container").toggleClass("visible")})),$("#strive-calendar-settings").on("submit",(function(t){t.preventDefault(),$(this).addClass("saving");var e={action:"save_settings",form_data:$(this).serialize(),save_settings_nonce:STRIVE_AJAX.save_settings_nonce};jQuery.post(ajaxurl,e,(function(t){$("#strive-settings-container").removeClass("visible"),$("#strive-calendar-settings").removeClass("saving");var e=moment().format("YYYY-MM-DD"),a=$("#calendar").find('.day[data-date="'+e+'"');if(i.reloadCalendar(e,a),(t=JSON.parse(t)).changed_dow&&($("#strive-calendar .dow-labels").replaceWith(t.dow_labels),$("#calendar-navigation").replaceWith(t.calendar_nav),i.setup(!1)),t.changed_colorblind&&(t.colorblind?$("#strive-content-calendar-parent").addClass("color-blind"):$("#strive-content-calendar-parent").removeClass("color-blind")),!0===t.changed_post_types){var s={action:"search_unscheduled_posts",search_query:"",search_unscheduled_posts_nonce:STRIVE_AJAX.search_unscheduled_posts_nonce};$("#unscheduled-drafts .post").css("opacity",.5),jQuery.post(ajaxurl,s,(function(t){$("#unscheduled-drafts .post").remove(),$("#unscheduled-drafts .posts").append(t),$("#search-icon").css("display","inline"),$("#search-info").css("display","none")}))}}))})),$("#unscheduled-drafts-toggle").on("click",(function(){$("#strive-content-calendar-parent").addClass("unscheduled-sidebar-open");var t={action:"save_sidebar_display",sidebar_open:"open",save_sidebar_display_nonce:STRIVE_AJAX.save_sidebar_display_nonce};jQuery.post(ajaxurl,t)})),$("#close-drafts").on("click",(function(){$("#strive-content-calendar-parent").removeClass("unscheduled-sidebar-open");var t={action:"save_sidebar_display",sidebar_open:"closed",save_sidebar_display_nonce:STRIVE_AJAX.save_sidebar_display_nonce};jQuery.post(ajaxurl,t)})),$("#search-drafts").on("input",(function(){clearTimeout(t);var e=$(this).val(),a={action:"search_unscheduled_posts",search_query:e,search_unscheduled_posts_nonce:STRIVE_AJAX.search_unscheduled_posts_nonce};t=setTimeout((function(){$("#unscheduled-drafts .post").css("opacity",.5),jQuery.post(ajaxurl,a,(function(t){$("#unscheduled-drafts .post").remove(),$("#unscheduled-drafts .posts").append(t),""==e?($("#search-icon").css("display","inline"),$("#search-info").css("display","none")):($("#search-icon").css("display","none"),$("#search-info").css("display","inline"))}))}),250)}));var e=document.querySelectorAll(".drop-target .post-container");e=Array.prototype.slice.call(e);var a=dragula({containers:e,mirrorContainer:document.getElementById("strive-calendar")}).on("drop",(function(t,e){var a="future",i=e.parentNode.dataset.date+" "+t.dataset.time;$(e.parentNode).hasClass("unscheduled-drafts")?(a="draft",i=moment().format("YYYY-MM-DD")+" "+t.dataset.time,$(t).data("status","draft"),$(t).removeClass("filtered")):($(t).data("status","future"),n($(e.parentNode),$(e).children(".post"))),$(e).parent().addClass("day-added"),o(),s.applyFilters();var r={id:t.dataset.id,post_date:i,post_status:a},l={action:"drag_drop_update",post_data:JSON.stringify(r),drag_drop_update_nonce:STRIVE_AJAX.drag_drop_update_nonce};jQuery.post(ajaxurl,l,(function(t){$(e).parent().removeClass("day-added")}))}));i.DnD=a;var n=function(t,e){Array.prototype.sort.bind(e)((function(t,e){var a=t.dataset.time,s=e.dataset.time;return a<s?-1:a>s?1:0})),t.find(".post-container").append(e)};r.sortPosts=n,l.sortPosts=n;var o=function(){var t=0;$("#calendar .post").each((function(){$(this).parent().parent().hasClass("drop-target")&&t++})),$("#post-count").text(t)};r.updatePostCount=o,$(".color-picker-button").each((function(){var t=$(this).prev(),e="#"+$(this).attr("id"),a=new Pickr({el:e,theme:"nano",default:t.val(),position:"top-start",swatches:["#CC1F1F","#E65F1C","#D99100","#839917","#429917","#179983","#227BA8","#003BB3","#5900B3","#B300B3","#FC6D6D","#FFAA00","#5DA9CF","#4DBFAC"],components:{preview:!0,hue:!0,interaction:{input:!0,clear:!1,cancel:!0,save:!0}}});a.on("save",(function(e){t.val(e.toHEXA().toString()),a.hide()}))})),$("#expand-categories").on("click",(function(t){t.preventDefault(),$(this).next().toggleClass("open"),$(this).find(".dashicons").toggleClass("dashicons-arrow-down dashicons-arrow-up")}))}))}();